name: rt-downloads

on:
    push:
        branches:
         - main
    release:
        types:
         - created

jobs:
    build:
        runs-on: ubuntu-latest

        steps:
        - name: ðŸ“¥ Checkout repository
          uses: actions/checkout@v2

        - name: ðŸ“‹ Setup NodeJS
          uses: actions/setup-node@v4
          with:
            node-version: 18

        - name: ðŸ”¨ Build App Index
          run: cd app-index && npm install && node generate
          
        - name: ðŸ“¦ Upload App Index
          uses: actions/upload-artifact@v4
          with:
            name: "app_index.json"
            path: "site/static/api/apps/index.json"